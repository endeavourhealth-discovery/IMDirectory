/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/6.7.1/samples
 */
plugins {
    id 'groovy-gradle-plugin'
    id 'com.github.node-gradle.node' version '5.0.0'
    id "org.sonarqube" version "4.4.1.3373"
}

repositories {
    // Use the plugin portal to apply community plugins in convention plugins.
    gradlePluginPortal()
}

def sonarLogin= System.getenv('SONAR_LOGIN')

sonar {
    properties {
        property 'sonar.organization', 'endeavourhealth-discovery'
        property 'sonar.token', sonarLogin
        property 'sonar.host.url', 'https://sonarcloud.io'
        property 'sonar.projectKey', 'endeavourhealth-discovery_IM::im_library'
        property 'sonar.gradle.skipCompile', 'true'
    }
}

clean.doLast {
    file('ui/coverage').deleteDir()
    file('ui/dist').deleteDir()
    file('node_api/coverage').deleteDir()
    file('node_api/dist').deleteDir()
}

allprojects {

}

println 'Build environment = [' + env + ']'
